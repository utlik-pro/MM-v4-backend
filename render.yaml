services:
  # Cron job for automatic BIR.BY â†’ ElevenLabs sync
  - type: cron
    name: mm-rag-elevenlabs-sync
    env: python
    region: frankfurt  # EU region for lower latency to bir.by
    plan: free

    # Sync schedule: every hour at minute 0
    # Format: minute hour day month day-of-week
    schedule: "0 * * * *"

    # Build command: install dependencies
    buildCommand: pip install -r requirements.txt

    # Start command: run sync pipeline
    startCommand: python3 sync-with-monitoring.py --check --upload-to-elevenlabs

    # Environment variables (set in Render Dashboard)
    envVars:
      - key: ELEVENLABS_API_KEY
        sync: false  # Don't sync from render.yaml, set manually in dashboard

      - key: ELEVENLABS_AGENT_ID
        sync: false  # Don't sync from render.yaml, set manually in dashboard

      - key: PYTHON_VERSION
        value: "3.9.18"

    # Persistent disk for quarters data and logs (optional but recommended)
    disk:
      name: quarters-data
      mountPath: /opt/render/project/src/quarters
      sizeGB: 1
