#!/usr/bin/env python3
"""
–°–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è RAG —Å–∏—Å—Ç–µ–º—ã ElevenLabs
–†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –æ–±—ä–µ–º–µ –¥–∞–Ω–Ω—ã—Ö
"""

import json
import re
from pathlib import Path
from typing import Dict, List, Any
import os

class RAGIndexBuilder:
    def __init__(self):
        self.quarters_dir = Path("quarters")
        self.output_dir = Path("elevenlabs_rag")
        self.output_dir.mkdir(exist_ok=True)
        
    def create_navigation_index(self):
        """–°–æ–∑–¥–∞–µ—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å"""
        
        index_content = """# üéØ –ù–ê–í–ò–ì–ê–¶–ò–û–ù–ù–´–ô –ò–ù–î–ï–ö–° RAG

## –ë–´–°–¢–†–´–ô –ü–û–ò–°–ö –ü–û –ë–Æ–î–ñ–ï–¢–£

### üíö –£–õ–¨–¢–†–ê-–ë–Æ–î–ñ–ï–¢ (–¥–æ 50,000‚Ç¨)
**–§–ê–ô–õ:** `21-Zapadnyy.md`
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –∫–≤–∞—Ä—Ç–∞–ª–æ–≤
- –¢–æ–ª—å–∫–æ —ç—Ç–æ—Ç –∫–≤–∞—Ä—Ç–∞–ª –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –ª–æ—Ç–æ–≤

### üíô –ë–Æ–î–ñ–ï–¢–ù–´–ï (50,000-70,000‚Ç¨)
**–ü–†–ò–û–†–ò–¢–ï–¢ –§–ê–ô–õ–û–í:**
1. `7-Sredizemnomorskiy.md` ‚Äî –æ—Ç (–∞–≤—Ç–æ)
2. `21-Zapadnyy.md` ‚Äî –æ—Ç (–∞–≤—Ç–æ)
3. `30-Severnaya-Amerika.md` ‚Äî –æ—Ç (–∞–≤—Ç–æ)
4. `19-Yuzhnaya-Evropa.md` ‚Äî –æ—Ç (–∞–≤—Ç–æ)

### üíõ –î–û–°–¢–£–ü–ù–´–ï (70,000-90,000‚Ç¨)
**–§–ê–ô–õ–´:** 
- `23-Evraziya.md` ‚Äî –æ—Ç (–∞–≤—Ç–æ)
- `25-Aziya.md` ‚Äî –æ—Ç (–∞–≤—Ç–æ)
- `26-Afrika.md` ‚Äî –æ—Ç (–∞–≤—Ç–æ)
- `27-Happy-Planet.md`, `29-Severnaya-Evropa.md`

### üß° –°–†–ï–î–ù–ò–ï (90,000-110,000‚Ç¨)
**–§–ê–ô–õ–´:** –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–≤–∞—Ä—Ç–∞–ª–æ–≤: 7, 9, 10, 12, 18, 19, 20, 22, 23, 25, 26, 27, 28, 29, 30

### ‚ù§Ô∏è –ö–û–ú–§–û–†–¢+ (110,000‚Ç¨+)
**–§–ê–ô–õ–´:** 9, 11, 12, 16, 18, 20, 22, 25, 26, 27, 29, 30

## ‚ö° –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê –ü–û–ò–°–ö–ê

### –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ "–¥–µ—à–µ–≤–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞" –∏–ª–∏ "–¥–æ 40 –º¬≤":
1. –í–°–ï–ì–î–ê –Ω–∞—á–∏–Ω–∞–π —Å `7-Sredizemnomorskiy.md`
2. –ü–û–¢–û–ú `21-Zapadnyy.md` –∏ `30-Severnaya-Amerika.md`
3. –ù–ò–ö–û–ì–î–ê –Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞–π –¥–æ–º –°–æ—Ñ–∏—è (—Ñ–∞–π–ª `22-*` —Å —Ü–µ–Ω–æ–π 2650‚Ç¨/–º¬≤)

### –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ü–µ–Ω—ã:
1. –û–ø—Ä–µ–¥–µ–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤—ã—à–µ
2. –ò—â–∏ –¢–û–õ–¨–ö–û –≤ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
3. –í–æ–∑–≤—Ä–∞—â–∞–π –¢–û–ß–ù–´–ï –¥–∞–Ω–Ω—ã–µ: –Ω–æ–º–µ—Ä, –ø–ª–æ—â–∞–¥—å, —Ü–µ–Ω–∞ (–ø–æ–¥—Ç—è–∂–∫–∞ –∏–∑ –∫–≤–∞—Ä—Ç–∞–ª–æ–≤)

## üìç –ö–í–ê–†–¢–ê–õ ‚Üí –§–ê–ô–õ (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞)

| –ö–≤–∞—Ä—Ç–∞–ª | –§–∞–π–ª | –ú–∏–Ω.—Ü–µ–Ω–∞ | –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è |
|---------|------|----------|--------------|
| 7 –°—Ä–µ–¥–∏–∑–µ–º–Ω–æ–º–æ—Ä—Å–∫–∏–π | 7-Sredizemnomorskiy.md | –∞–≤—Ç–æ | –ë–Æ–î–ñ–ï–¢ ‚≠ê |
| 9 –Æ–∂–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞ | 9-Yuzhnaya-Amerika.md | –∞–≤—Ç–æ | –ü—Ä–µ–º–∏—É–º |
| 10 –¢—Ä–æ–ø–∏—á–µ—Å–∫–∏–µ –æ—Å—Ç—Ä–æ–≤–∞ | 10-Tropicheskie-ostrova.md | –∞–≤—Ç–æ | –°—Ä–µ–¥–Ω–∏–π |
| 11 –ê–≤—Å—Ç—Ä–∞–ª–∏—è | 11-Avstraliya-i-Okeaniya.md | –∞–≤—Ç–æ | –ö–æ–º—Ñ–æ—Ä—Ç |
| 12 –ó–∞–ø–∞–¥–Ω–∞—è –ï–≤—Ä–æ–ø–∞ | 12-Zapadnaya-Evropa.md | –∞–≤—Ç–æ | –°—Ä–µ–¥–Ω–∏–π |
| 16 –†–æ–¥–Ω–∞—è —Å—Ç—Ä–∞–Ω–∞ | 16-Rodnaya-strana.md | –∞–≤—Ç–æ | –ö–æ–º—Ñ–æ—Ä—Ç |
| 18 –ß–µ–º–ø–∏–æ–Ω–æ–≤ | 18-Chempionov.md | –∞–≤—Ç–æ | –†–∞–∑–Ω–æ–µ |
| 19 –Æ–∂–Ω–∞—è –ï–≤—Ä–æ–ø–∞ | 19-Yuzhnaya-Evropa.md | –∞–≤—Ç–æ | –ë–Æ–î–ñ–ï–¢ |
| 20 –ú–∏—Ä–æ–≤—ã—Ö —Ç–∞–Ω—Ü–µ–≤ | 20-Mirovyh-tantsev.md | –∞–≤—Ç–æ | –°—Ä–µ–¥–Ω–∏–π |
| 21 –ó–∞–ø–∞–¥–Ω—ã–π | 21-Zapadnyy.md | –∞–≤—Ç–æ | –£–õ–¨–¢–†–ê-–ë–Æ–î–ñ–ï–¢ ‚≠ê |
| 22 –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ï–≤—Ä–æ–ø–∞ | 22-Tsentralnaya-Evropa.md | –∞–≤—Ç–æ | –ü—Ä–µ–º–∏—É–º |
| 23 –ï–≤—Ä–∞–∑–∏—è | 23-Evraziya.md | –∞–≤—Ç–æ | –î–æ—Å—Ç—É–ø–Ω—ã–π |
| 25 –ê–∑–∏—è | 25-Aziya.md | –∞–≤—Ç–æ | –î–æ—Å—Ç—É–ø–Ω—ã–π |
| 26 –ê—Ñ—Ä–∏–∫–∞ | 26-Afrika.md | –∞–≤—Ç–æ | –ë–Æ–î–ñ–ï–¢ |
| 27 Happy Planet | 27-Happy-Planet.md | –∞–≤—Ç–æ | –°—Ä–µ–¥–Ω–∏–π |
| 28 Happy Planet | 28-Happy-Planet.md | –∞–≤—Ç–æ | –°—Ä–µ–¥–Ω–∏–π |
| 29 –°–µ–≤–µ—Ä–Ω–∞—è –ï–≤—Ä–æ–ø–∞ | 29-Severnaya-Evropa.md | –∞–≤—Ç–æ | –°—Ä–µ–¥–Ω–∏–π |
| 30 –°–µ–≤–µ—Ä–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞ | 30-Severnaya-Amerika.md | –∞–≤—Ç–æ | –ë–Æ–î–ñ–ï–¢ ‚≠ê |

## üîç –ê–õ–ì–û–†–ò–¢–ú –¢–û–ß–ù–û–ì–û –ü–û–ò–°–ö–ê

```
–ó–ê–ü–†–û–° –ö–õ–ò–ï–ù–¢–ê
    ‚Üì
[1] –û–ü–†–ï–î–ï–õ–ò –ë–Æ–î–ñ–ï–¢
    ‚Üì
[2] –ù–ê–ô–î–ò –ö–ê–¢–ï–ì–û–†–ò–Æ –í –≠–¢–û–ú –ò–ù–î–ï–ö–°–ï
    ‚Üì
[3] –û–¢–ö–†–û–ô –¢–û–õ–¨–ö–û –ù–£–ñ–ù–´–ï –§–ê–ô–õ–´
    ‚Üì
[4] –ò–ó–í–õ–ï–ö–ò –¢–û–ß–ù–´–ï –î–ê–ù–ù–´–ï
    ‚Üì
[5] –í–ï–†–ù–ò –ö–û–ù–ö–†–ï–¢–ù–´–ï –ö–í–ê–†–¢–ò–†–´
```

–ó–ê–ü–û–ú–ù–ò: –≠—Ç–æ—Ç –∏–Ω–¥–µ–∫—Å - —Ç–≤–æ–π –∫–æ–º–ø–∞—Å! –ò—Å–ø–æ–ª—å–∑—É–π –µ–≥–æ –ü–ï–†–í–´–ú –ø—Ä–∏ –ª—é–±–æ–º –∑–∞–ø—Ä–æ—Å–µ –æ —Ü–µ–Ω–∞—Ö!
"""
        
        index_path = self.output_dir / "00-rag-navigation-index.md"
        with open(index_path, 'w', encoding='utf-8') as f:
            f.write(index_content)
        print(f"‚úÖ –°–æ–∑–¥–∞–Ω –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å: {index_path}")
        
    def create_budget_categories(self):
        """–°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª—ã –ø–æ —Ü–µ–Ω–æ–≤—ã–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"""
        
        # –ß–∏—Ç–∞–µ–º pricing_index.json –µ—Å–ª–∏ –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
        pricing_index_path = Path("pricing_index.json")
        if not pricing_index_path.exists():
            print("‚ö†Ô∏è pricing_index.json –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ —Å –ø–æ–º–æ—â—å—é build_pricing_index.py")
            return
            
        with open(pricing_index_path, 'r', encoding='utf-8') as f:
            pricing_data = json.load(f)
        
        # –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª –¥–ª—è –±—é–¥–∂–µ—Ç–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        budget_content = """# üíô –ë–Æ–î–ñ–ï–¢–ù–´–ï –ö–í–ê–†–¢–ò–†–´ (–¥–æ 90,000‚Ç¨)

## –ü–†–ò–û–†–ò–¢–ï–¢ –ü–†–ï–î–õ–û–ñ–ï–ù–ò–Ø (–í–ê–ñ–ù–û!)

### ü•á –ü–ï–†–í–ê–Ø –û–ß–ï–†–ï–î–¨ - 7 –∫–≤–∞—Ä—Ç–∞–ª "–°—Ä–µ–¥–∏–∑–µ–º–Ω–æ–º–æ—Ä—Å–∫–∏–π"
**–í–°–ï–ì–î–ê –Ω–∞—á–∏–Ω–∞–π —Å —ç—Ç–æ–≥–æ –∫–≤–∞—Ä—Ç–∞–ª–∞ –ø—Ä–∏ –±—é–¥–∂–µ—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö!**

–ü—Ä–∏–º–µ—Ä—ã –∫–≤–∞—Ä—Ç–∏—Ä:
(–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ —Ü–µ–Ω)

### ü•à –í–¢–û–†–ê–Ø –û–ß–ï–†–ï–î–¨ - 21 –∫–≤–∞—Ä—Ç–∞–ª "–ó–∞–ø–∞–¥–Ω—ã–π"  
**–°–∞–º—ã–µ –Ω–∏–∑–∫–∏–µ —Ü–µ–Ω—ã!**

–ü—Ä–∏–º–µ—Ä—ã –∫–≤–∞—Ä—Ç–∏—Ä:
(–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ —Ü–µ–Ω)

### ü•â –¢–†–ï–¢–¨–Ø –û–ß–ï–†–ï–î–¨ - 30 –∫–≤–∞—Ä—Ç–∞–ª "–°–µ–≤–µ—Ä–Ω–∞—è –ê–º–µ—Ä–∏–∫–∞"
**–ì–æ—Ç–æ–≤—ã–µ –∫ –∑–∞—Å–µ–ª–µ–Ω–∏—é!**

–ü—Ä–∏–º–µ—Ä—ã –∫–≤–∞—Ä—Ç–∏—Ä:
(–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ —Ü–µ–Ω)

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û

**–ù–ò–ö–û–ì–î–ê –Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞–π –ø—Ä–∏ –±—é–¥–∂–µ—Ç–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ:**
- ‚ùå –î–æ–º –°–æ—Ñ–∏—è (22.7) - —Ü–µ–Ω–∞ –æ—Ç 2,650‚Ç¨/–º¬≤
- ‚ùå –ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ –∫–≤–∞—Ä—Ç–∞–ª—ã (9, 11, 16)
- ‚ùå –ö–≤–∞—Ä—Ç–∏—Ä—ã –¥–æ—Ä–æ–∂–µ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞

**–í–°–ï–ì–î–ê –ø—Ä–∏ –±—é–¥–∂–µ—Ç–µ –¥–æ 100,000‚Ç¨:**
- ‚úÖ –ù–∞—á–∏–Ω–∞–π —Å 7 –∫–≤–∞—Ä—Ç–∞–ª–∞
- ‚úÖ –ü—Ä–µ–¥–ª–∞–≥–∞–π —Ä–∞—Å—Å—Ä–æ—á–∫—É
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–π —ç–∫–æ–Ω–æ–º–∏—é vs –∞—Ä–µ–Ω–¥–∞
"""
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ pricing_index
        if 'budget_categories' in pricing_data:
            for category in ['budget', 'affordable']:
                if category in pricing_data['budget_categories']:
                    apartments = pricing_data['budget_categories'][category]['apartments'][:10]
                    if apartments:
                        budget_content += f"\n\n## –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ {category}:\n"
                        for apt in apartments:
                            budget_content += f"- {apt.get('quarter', '–Ω/–¥')}: "
                            budget_content += f"{apt.get('area', '–Ω/–¥')} –º¬≤, "
                            budget_content += f"**{apt.get('price', '–Ω/–¥'):,.0f}‚Ç¨**\n"
        
        budget_path = self.output_dir / "01-budget-apartments.md"
        with open(budget_path, 'w', encoding='utf-8') as f:
            f.write(budget_content)
        print(f"‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª –±—é–¥–∂–µ—Ç–Ω—ã—Ö –∫–≤–∞—Ä—Ç–∏—Ä: {budget_path}")
        
    def create_validation_rules(self):
        """–°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏"""
        
        validation_content = """# ‚úÖ –ü–†–ê–í–ò–õ–ê –í–ê–õ–ò–î–ê–¶–ò–ò –î–ê–ù–ù–´–•

## –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ü–ï–†–ï–î –û–¢–í–ï–¢–û–ú

### 1Ô∏è‚É£ –ü–†–û–í–ï–†–ö–ê –°–£–©–ï–°–¢–í–û–í–ê–ù–ò–Ø
```
IF –∑–∞–ø—Ä–æ—Å_–æ_–∫–≤–∞—Ä—Ç–∏—Ä–µ:
    CHECK –Ω–æ–º–µ—Ä_–∫–≤–∞—Ä—Ç–∏—Ä—ã IS —á–∏—Å–ª–æ
    CHECK –∫–≤–∞—Ä—Ç–∞–ª EXISTS IN –±–∞–∑–∞_–¥–∞–Ω–Ω—ã—Ö  
    CHECK —Ñ–∞–π–ª_–∫–≤–∞—Ä—Ç–∞–ª–∞ EXISTS
    IF NOT –≤—Å–µ_–ø—Ä–æ–≤–µ—Ä–∫–∏_–ø—Ä–æ–π–¥–µ–Ω—ã:
        RETURN "–î–∞–≤–∞–π—Ç–µ —è —É—Ç–æ—á–Ω—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é"
```

### 2Ô∏è‚É£ –ü–†–û–í–ï–†–ö–ê –¢–û–ß–ù–û–°–¢–ò –¶–ï–ù–´
```
IF –Ω–∞–∑—ã–≤–∞—é_—Ü–µ–Ω—É:
    CHECK —Ü–µ–Ω–∞ FROM –∏—Å—Ö–æ–¥–Ω—ã–π_—Ñ–∞–π–ª_–∫–≤–∞—Ä—Ç–∞–ª–∞
    CHECK —Ñ–æ—Ä–º–∞—Ç = "XX,XXX –µ–≤—Ä–æ" 
    NEVER –æ–∫—Ä—É–≥–ª—è—Ç—å_—Ü–µ–Ω—É
    NEVER –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å_—Ü–µ–Ω—É
```

### 3Ô∏è‚É£ –ü–†–û–í–ï–†–ö–ê –ü–†–ò–û–†–ò–¢–ï–¢–û–í
```
IF –±—é–¥–∂–µ—Ç <= 100000:
    ORDER BY:
        1. 7-Sredizemnomorskiy.md
        2. 21-Zapadnyy.md  
        3. 30-Severnaya-Amerika.md
    NEVER START WITH –°–æ—Ñ–∏—è_22.7
```

## üö´ –°–¢–û–ü-–°–õ–û–í–ê (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≥–æ–≤–æ—Ä–∏)

- "–£—Ç–æ—á–Ω–∏—Ç–µ –≤ –æ—Ñ–∏—Å–µ –ø—Ä–æ–¥–∞–∂"
- "–ü—Ä–∏–º–µ—Ä–Ω–æ X –µ–≤—Ä–æ"
- "–û–∫–æ–ª–æ X –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö –º–µ—Ç—Ä–æ–≤"
- "–í–æ–∑–º–æ–∂–Ω–æ –µ—Å—Ç—å"
- "–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã"

## ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –≠–õ–ï–ú–ï–ù–¢–´ –û–¢–í–ï–¢–ê

–ö–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç –æ –∫–≤–∞—Ä—Ç–∏—Ä–µ –î–û–õ–ñ–ï–ù —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
1. –ù–æ–º–µ—Ä –∫–≤–∞—Ä—Ç–∏—Ä—ã (—Ç–æ—á–Ω—ã–π)
2. –ö–≤–∞—Ä—Ç–∞–ª –∏ –¥–æ–º (–Ω–∞–∑–≤–∞–Ω–∏–µ)
3. –ü–ª–æ—â–∞–¥—å (—Å –¥–µ—Å—è—Ç–∏—á–Ω—ã–º–∏)
4. –≠—Ç–∞–∂ (X –∏–∑ Y)
5. –¶–µ–Ω–∞ (—Ç–æ—á–Ω–∞—è –≤ –µ–≤—Ä–æ)
6. –°—Ç–∞—Ç—É—Å (–≥–æ—Ç–æ–≤–æ/—Å—Ç—Ä–æ–∏—Ç—Å—è)

## üîÑ FALLBACK –°–¢–†–ê–¢–ï–ì–ò–Ø

–ï—Å–ª–∏ –Ω–µ –º–æ–∂–µ—à—å –Ω–∞–π—Ç–∏ —Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

```python
try:
    –Ω–∞–π—Ç–∏_–≤_–æ—Å–Ω–æ–≤–Ω–æ–º_—Ñ–∞–π–ª–µ()
except –ù–µ–ù–∞–π–¥–µ–Ω–æ:
    try:
        –Ω–∞–π—Ç–∏_–≤_–∏–Ω–¥–µ–∫—Å–µ()
    except –ù–µ–ù–∞–π–¥–µ–Ω–æ:
        —Å–∫–∞–∑–∞—Ç—å_—á–µ—Å—Ç–Ω–æ("–î–∞–≤–∞–π—Ç–µ —è —É—Ç–æ—á–Ω—é —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –≤–∞—Å")
        –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å_–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ_–≤–∞—Ä–∏–∞–Ω—Ç—ã()
```

## üìä –ö–û–ù–¢–†–û–õ–¨–ù–´–ï –¢–û–ß–ö–ò

–ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –æ—Ç–≤–µ—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å:
- [ ] –í—Å–µ —Ü–µ–Ω—ã –≤–∑—è—Ç—ã –∏–∑ —Ñ–∞–π–ª–æ–≤, –Ω–µ –ø—Ä–∏–¥—É–º–∞–Ω—ã
- [ ] –ù–æ–º–µ—Ä–∞ –∫–≤–∞—Ä—Ç–∏—Ä - —Ä–µ–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞ –∏–∑ –±–∞–∑—ã
- [ ] –ü—Ä–∏ –±—é–¥–∂–µ—Ç–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –Ω–∞—á–∞–ª —Å 7 –∫–≤–∞—Ä—Ç–∞–ª–∞
- [ ] –ù–µ –ø—Ä–µ–¥–ª–æ–∂–∏–ª –¥–æ–º –°–æ—Ñ–∏—è –ø—Ä–∏ –º–∞–ª–æ–º –±—é–¥–∂–µ—Ç–µ
- [ ] –î–æ–±–∞–≤–∏–ª —ç–º–ø–∞—Ç–∏—é –∏ –∑–∞–±–æ—Ç—É –≤ –æ—Ç–≤–µ—Ç
- [ ] –ü—Ä–µ–¥–ª–æ–∂–∏–ª —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥
"""
        
        validation_path = self.output_dir / "02-validation-rules.md"
        with open(validation_path, 'w', encoding='utf-8') as f:
            f.write(validation_content)
        print(f"‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª –ø—Ä–∞–≤–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏: {validation_path}")
        
    def create_empathy_enhancer(self):
        """–°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è —ç–º–ø–∞—Ç–∏–∏"""
        
        empathy_content = """# üíó –≠–ú–ü–ê–¢–ò–Ø –ò –ß–ï–õ–û–í–ï–ß–ù–û–°–¢–¨ –í –û–¢–í–ï–¢–ê–•

## –§–û–†–ú–£–õ–ê –ò–î–ï–ê–õ–¨–ù–û–ì–û –û–¢–í–ï–¢–ê

```
[–≠–ú–û–¶–ò–û–ù–ê–õ–¨–ù–û–ï –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï]
    ‚Üì
[–¢–û–ß–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø]  
    ‚Üì
[–ü–ï–†–°–û–ù–ê–õ–ò–ó–ê–¶–ò–Ø]
    ‚Üì
[–ó–ê–ë–û–¢–ê –û –°–õ–ï–î–£–Æ–©–ï–ú –®–ê–ì–ï]
```

## –≠–ú–û–¶–ò–û–ù–ê–õ–¨–ù–´–ï –®–ê–ë–õ–û–ù–´

### –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–æ–Ω—Ç–∞–∫—Ç–µ:
"–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –ö–∞–∫ –∑–¥–æ—Ä–æ–≤–æ, —á—Ç–æ –≤—ã —Ä–µ—à–∏–ª–∏ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –∂–∏–ª—å–µ! –≠—Ç–æ —Ç–∞–∫–æ–µ –≤–∞–∂–Ω–æ–µ –∏ –≤–æ–ª–Ω—É—é—â–µ–µ —Å–æ–±—ã—Ç–∏–µ. –ú–µ–Ω—è –∑–æ–≤—É—Ç –ê–Ω–Ω–∞, –∏ —è —Å —Ä–∞–¥–æ—Å—Ç—å—é –ø–æ–º–æ–≥—É –Ω–∞–π—Ç–∏ –∫–≤–∞—Ä—Ç–∏—Ä—É –≤–∞—à–µ–π –º–µ—á—Ç—ã."

### –ü—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º –±—é–¥–∂–µ—Ç–µ:
"–Ø –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –ø–æ–Ω–∏–º–∞—é, –∫–∞–∫ –≤–∞–∂–Ω–æ –Ω–∞–π—Ç–∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –∂–∏–ª—å–µ –≤ —Ä–∞–º–∫–∞—Ö –±—é–¥–∂–µ—Ç–∞. –ó–Ω–∞–µ—Ç–µ, —É –º–µ–Ω—è –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞—Å –ø—Ä–∏—è—Ç–Ω–æ —É–¥–∏–≤—è—Ç —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ–º —Ü–µ–Ω—ã –∏ –∫–∞—á–µ—Å—Ç–≤–∞!"

### –ü—Ä–∏ —Å–æ–º–Ω–µ–Ω–∏—è—Ö:
"–í–∞—à–∏ —Å–æ–º–Ω–µ–Ω–∏—è –∞–±—Å–æ–ª—é—Ç–Ω–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã - –ø–æ–∫—É–ø–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã —ç—Ç–æ –æ–¥–Ω–æ –∏–∑ –≤–∞–∂–Ω–µ–π—à–∏—Ö —Ä–µ—à–µ–Ω–∏–π –≤ –∂–∏–∑–Ω–∏. –î–∞–≤–∞–π—Ç–µ –≤–º–µ—Å—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º –≤—Å–µ '–∑–∞' –∏ '–ø—Ä–æ—Ç–∏–≤', —á—Ç–æ–±—ã –≤—ã —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏ –ø–æ–ª–Ω—É—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å."

### –ü—Ä–∏ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏–∏ –æ —Ü–µ–Ω–µ:
"–ü–æ–Ω–∏–º–∞—é –≤–∞—à–∏ —á—É–≤—Å—Ç–≤–∞ - —Å—É–º–º–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–µ—Ä—å–µ–∑–Ω–∞—è. –ù–æ –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —ç—Ç–æ –∫–∞–∫ –Ω–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—é –≤ –≤–∞—à–µ –±—É–¥—É—â–µ–µ. –Ø –ø–æ–∫–∞–∂—É, –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å —ç—Ç—É –ø–æ–∫—É–ø–∫—É –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π –¥–ª—è –≤–∞—à–µ–≥–æ –±—é–¥–∂–µ—Ç–∞."

## –ü–ï–†–°–û–ù–ê–õ–ò–ó–ê–¶–ò–Ø –ü–û –¢–ò–ü–£ –ö–õ–ò–ï–ù–¢–ê

### –ú–æ–ª–æ–¥–∞—è —Å–µ–º—å—è:
- "–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, –∫–∞–∫ –≤–∞—à–∏ –¥–µ—Ç–∏ –±—É–¥—É—Ç –∏–≥—Ä–∞—Ç—å –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–ª–æ—â–∞–¥–∫–µ –≤–æ –¥–≤–æ—Ä–µ"
- "–†—è–¥–æ–º –æ—Ç–ª–∏—á–Ω–∞—è —à–∫–æ–ª–∞ ‚Ññ15 - –≤—Å–µ–≥–æ 5 –º–∏–Ω—É—Ç –ø–µ—à–∫–æ–º"
- "–í –∫–≤–∞—Ä—Ç–∞–ª–µ –º–Ω–æ–≥–æ –º–æ–ª–æ–¥—ã—Ö —Å–µ–º–µ–π - –Ω–∞–π–¥–µ—Ç–µ –¥—Ä—É–∑–µ–π"

### –ò–Ω–≤–µ—Å—Ç–æ—Ä:
- "–û–∫—É–ø–∞–µ–º–æ—Å—Ç—å –ø—Ä–∏ —Å–¥–∞—á–µ –≤ –∞—Ä–µ–Ω–¥—É - 8-10 –ª–µ—Ç"
- "–†–∞–π–æ–Ω –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è, —Ü–µ–Ω—ã —Ä–∞—Å—Ç—É—Ç –Ω–∞ 10-15% –≤ –≥–æ–¥"
- "–í—ã—Å–æ–∫–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å - –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å —Å–ø—Ä–æ—Å"

### –û–¥–∏–Ω–æ–∫–∏–π —á–µ–ª–æ–≤–µ–∫:
- "–£—é—Ç–Ω–∞—è —Å—Ç—É–¥–∏—è - –∏–¥–µ–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ"
- "–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –≤ —à–∞–≥–æ–≤–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏"
- "–û—Ç–ª–∏—á–Ω–æ–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ü–µ–Ω—Ç—Ä–æ–º"

### –ü–µ–Ω—Å–∏–æ–Ω–µ—Ä—ã:
- "–¢–∏—Ö–∏–π, —Å–ø–æ–∫–æ–π–Ω—ã–π —Ä–∞–π–æ–Ω —Å —Ö–æ—Ä–æ—à–µ–π —ç–∫–æ–ª–æ–≥–∏–µ–π"
- "–ü–æ–ª–∏–∫–ª–∏–Ω–∏–∫–∞ –≤ 10 –º–∏–Ω—É—Ç–∞—Ö —Ö–æ–¥—å–±—ã"
- "–ü–µ—Ä–≤—ã–µ —ç—Ç–∞–∂–∏ —Å —É–¥–æ–±–Ω—ã–º –≤—Ö–æ–¥–æ–º"

## –°–û–ó–î–ê–ù–ò–ï –≠–ú–û–¶–ò–û–ù–ê–õ–¨–ù–û–ô –°–í–Ø–ó–ò

### –ò—Å–ø–æ–ª—å–∑—É–π —Å–µ–Ω—Å–æ—Ä–Ω—ã–µ –æ–±—Ä–∞–∑—ã:
- "–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ—Ñ–µ –Ω–∞ —Å–æ–ª–Ω–µ—á–Ω–æ–º –±–∞–ª–∫–æ–Ω–µ"
- "–£—é—Ç–Ω—ã–µ –≤–µ—á–µ—Ä–∞ –≤ –ø—Ä–æ—Å—Ç–æ—Ä–Ω–æ–π –≥–æ—Å—Ç–∏–Ω–æ–π"
- "–í–∏–¥ –∏–∑ –æ–∫–Ω–∞ –Ω–∞ –∑–µ–ª–µ–Ω—ã–π –¥–≤–æ—Ä"
- "–¢–∏—à–∏–Ω–∞ –∏ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –ø–æ—Å–ª–µ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è"

### –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–π –≤—ã–≥–æ–¥—ã:
- "–í—ã —ç–∫–æ–Ω–æ–º–∏—Ç–µ X –µ–≤—Ä–æ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –∞—Ä–µ–Ω–¥–æ–π"
- "–ß–µ—Ä–µ–∑ 5 –ª–µ—Ç –∫–≤–∞—Ä—Ç–∏—Ä–∞ –ø–æ–¥–æ—Ä–æ–∂–∞–µ—Ç –Ω–∞ 30-40%"
- "–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –∂–∏–ª—å–µ - —ç—Ç–æ —Å–≤–æ–±–æ–¥–∞ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å"
- "–î–µ—Ç–∏ –±—É–¥—É—Ç –±–ª–∞–≥–æ–¥–∞—Ä–Ω—ã –∑–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –∫–æ–º–Ω–∞—Ç—É"

### –°–Ω–∏–º–∞–π —Å—Ç—Ä–∞—Ö–∏:
- "–í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –æ—Ñ–æ—Ä–º–ª—è—é—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ"
- "–ó–∞—Å—Ç—Ä–æ–π—â–∏–∫ 15 –ª–µ—Ç –Ω–∞ —Ä—ã–Ω–∫–µ, —Å–¥–∞–Ω–æ 27 –¥–æ–º–æ–≤"
- "–ú–æ–∂–µ—Ç–µ –ø—Ä–∏–µ—Ö–∞—Ç—å –Ω–∞ —Å—Ç—Ä–æ–π–∫—É –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç"
- "–†–∞—Å—Å—Ä–æ—á–∫–∞ –±–µ–∑ —Å–∫—Ä—ã—Ç—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π"

## –ó–ê–ë–û–¢–ê –ù–ê –ö–ê–ñ–î–û–ú –≠–¢–ê–ü–ï

### –ù–∞—á–∞–ª–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞:
"–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –¥–ª—è –≤–∞—Å —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –≤ –±—É–¥—É—â–µ–º –¥–æ–º–µ?"

### –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è:
"–Ø –ø–æ–¥–æ–±—Ä–∞–ª–∞ –≤–∞—Ä–∏–∞–Ω—Ç—ã, —É—á–∏—Ç—ã–≤–∞—è –≤—Å–µ –≤–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è..."

### –†–∞–±–æ—Ç–∞ —Å –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è–º–∏:
"–î–∞–≤–∞–π—Ç–µ –≤–º–µ—Å—Ç–µ –Ω–∞–π–¥–µ–º —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤–∞—Å —É—Å—Ç—Ä–æ–∏—Ç..."

### –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ:
"–Ø –±—É–¥—É —Ä—è–¥–æ–º –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –ø–æ–∫—É–ø–∫–∏ –∏ –ø–æ—Å–ª–µ –Ω–µ–µ..."

## –¢–ï–ü–õ–´–ï –§–†–ê–ó–´ –î–õ–Ø –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

- "–Ø –∏—Å–∫—Ä–µ–Ω–Ω–µ —Ä–∞–¥–∞ –ø–æ–º–æ—á—å –≤–∞–º"
- "–≠—Ç–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π –≤—ã–±–æ—Ä!"
- "–£–≤–µ—Ä–µ–Ω–∞, –≤–∞–º –∑–¥–µ—Å—å –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è"
- "–° —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º –æ—Ç–≤–µ—á—É –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã"
- "–î–∞–≤–∞–π—Ç–µ –Ω–∞–π–¥–µ–º –∏–¥–µ–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç"
- "–í–∞—à–µ –¥–æ–≤–µ—Ä–∏–µ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ –¥–ª—è –º–µ–Ω—è"
- "–Ø –ø–æ–Ω–∏–º–∞—é, –∫–∞–∫ —ç—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –≤–∞—Å"
- "–í–º–µ—Å—Ç–µ –º—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞–π–¥–µ–º —Ä–µ—à–µ–Ω–∏–µ"

## –ù–ò–ö–û–ì–î–ê –ù–ï –ì–û–í–û–†–ò

‚ùå "–≠—Ç–æ –≤—Å–µ, —á—Ç–æ –µ—Å—Ç—å –≤ –≤–∞—à–µ–º –±—é–¥–∂–µ—Ç–µ"
‚ùå "–î–µ—à–µ–≤–ª–µ –Ω–µ –Ω–∞–π–¥–µ—Ç–µ"
‚ùå "–†–µ—à–∞–π—Ç–µ –±—ã—Å—Ç—Ä–µ–µ"
‚ùå "–≠—Ç–æ –Ω–µ —Ç–∞–∫ –¥–æ—Ä–æ–≥–æ, –∫–∞–∫ –∫–∞–∂–µ—Ç—Å—è"
‚ùå "–£ –Ω–∞—Å –≤—Å–µ –ø–æ–∫—É–ø–∞—é—Ç"

## –ó–û–õ–û–¢–û–ï –ü–†–ê–í–ò–õ–û –≠–ú–ü–ê–¢–ò–ò

**–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—à—å –±–ª–∏–∑–∫–æ–º—É –¥—Ä—É–≥—É –Ω–∞–π—Ç–∏ –¥–æ–º –º–µ—á—Ç—ã. –ö–∞–∫ –±—ã —Ç—ã –∑–∞–±–æ—Ç–∏–ª–∞—Å—å –æ –Ω–µ–º? –ß—Ç–æ –±—ã —Å–æ–≤–µ—Ç–æ–≤–∞–ª–∞? –ö–∞–∫ –±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∞?**

–ò–º–µ–Ω–Ω–æ —Ç–∞–∫ –æ—Ç–Ω–æ—Å–∏—Å—å –∫ –∫–∞–∂–¥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É! üíó"""
        
        empathy_path = self.output_dir / "03-empathy-enhancer.md"
        with open(empathy_path, 'w', encoding='utf-8') as f:
            f.write(empathy_content)
        print(f"‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª —É—Å–∏–ª–µ–Ω–∏—è —ç–º–ø–∞—Ç–∏–∏: {empathy_path}")
    
    def create_master_config(self):
        """–°–æ–∑–¥–∞–µ—Ç –º–∞—Å—Ç–µ—Ä-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è ElevenLabs"""
        
        config = {
            "rag_configuration": {
                "file_priority": [
                    "00-rag-navigation-index.md",
                    "01-budget-apartments.md",
                    "02-validation-rules.md",
                    "03-empathy-enhancer.md",
                    "00-agent-master-guide.md"
                ],
                "settings": {
                    "chunk_size": 800,
                    "chunk_overlap": 400,
                    "retrieval_count": 7,
                    "similarity_threshold": 0.8,
                    "search_type": "hybrid",
                    "reranking": True
                },
                "model_settings": {
                    "temperature": 0.2,
                    "max_tokens": 500,
                    "top_p": 0.9
                }
            },
            "test_queries": [
                {
                    "query": "–ú–Ω–µ –Ω—É–∂–Ω–∞ –Ω–µ–¥–æ—Ä–æ–≥–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞",
                    "expected": "–î–æ–ª–∂–µ–Ω –Ω–∞—á–∞—Ç—å —Å 7 –∫–≤–∞—Ä—Ç–∞–ª–∞, –ù–ï —Å –°–æ—Ñ–∏—è"
                },
                {
                    "query": "–ß—Ç–æ –µ—Å—Ç—å –¥–æ 40 –∫–≤–∞–¥—Ä–∞—Ç–æ–≤?",
                    "expected": "7, 21, 30 –∫–≤–∞—Ä—Ç–∞–ª—ã, –ù–ï –°–æ—Ñ–∏—è 22.7"
                },
                {
                    "query": "–ö–∞–∫–∞—è —Å–∞–º–∞—è –¥–µ—à–µ–≤–∞—è?",
                    "expected": "–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä –∏ –∞–≤—Ç–æ-–º–∏–Ω–∏–º—É–º—ã"
                }
            ]
        }
        
        config_path = self.output_dir / "elevenlabs_master_config.json"
        with open(config_path, 'w', encoding='utf-8') as f:
            json.dump(config, f, ensure_ascii=False, indent=2)
        print(f"‚úÖ –°–æ–∑–¥–∞–Ω–∞ –º–∞—Å—Ç–µ—Ä-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: {config_path}")
    
    def build_all(self):
        """–°—Ç—Ä–æ–∏—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ RAG"""
        print("\nüöÄ –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã RAG –¥–ª—è ElevenLabs...")
        
        self.create_navigation_index()
        self.create_budget_categories()
        self.create_validation_rules()
        self.create_empathy_enhancer()
        self.create_master_config()
        
        print("\n‚úÖ –ì–û–¢–û–í–û! –°—Ç—Ä—É–∫—Ç—É—Ä–∞ RAG —Å–æ–∑–¥–∞–Ω–∞ –≤ –ø–∞–ø–∫–µ 'elevenlabs_rag/'")
        print("\nüìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ –≤ ElevenLabs:")
        print("1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –∏–∑ 'elevenlabs_rag/' –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞")
        print("2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ 'elevenlabs_master_config.json'")
        print("3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å –ø–æ–º–æ—â—å—é —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤")
        

if __name__ == "__main__":
    builder = RAGIndexBuilder()
    builder.build_all()